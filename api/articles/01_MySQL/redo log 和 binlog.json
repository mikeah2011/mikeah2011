{"title":"MySQL的三种日志","uid":"b6123b50bf2c6e96c11f8d6bbfaa6c5c","slug":"01_MySQL/redo log 和 binlog","date":"2018-03-20T07:05:07.000Z","updated":"2022-10-05T13:38:01.990Z","comments":true,"path":"api/articles/01_MySQL/redo log 和 binlog.json","keywords":null,"cover":[],"content":"<p><code>redo log</code>日志也叫做<code>WAL</code>技术（<code>Write- Ahead Logging</code>），他是一种<strong>先写日志，并更新内存，最后再更新磁盘的技术</strong>，为了就是减少sql执行期间的数据库io操作，并且更新磁盘往往是在Mysql比较闲的时候，这样就大大减轻了Mysql的压力。</p>\n<p><code>redo log</code>是固定大小，是物理日志，属于InnoDB引擎的，并且写redo log是环状写日志的形式：</p>\n<p><img src=\"/mikeah2011/Users/michael/Project/MichaelBlog/images/redolog.png\" alt=\"图片\"></p>\n<p>如上图所示：若是四组的redo log文件，一组为1G的大小，那么四组就是4G的大小，其中<code>write pos</code>是<strong>记录当前的位置</strong>，有数据写入当前位置，那么write pos就会边写入边往后移。</p>\n<p><code>check point</code>记录<strong>擦除的位置</strong>，因为redo log是固定大小，所以当redo log满的时候，也就是<code>write pos</code>追上<code>check point</code>的时候，需要清除<code>redo log</code>的部分数据，清除的数据会被持久化到磁盘中，然后将<code>check point</code>向前移动。</p>\n<p><code>redo log</code>日志实现了即使在数据库出现异常宕机的时候，重启后之前的记录也不会丢失，这就是<code>crash-safe</code>能力。</p>\n<p><code>binlog</code>称为<strong>归档日志</strong>，是逻辑上的日志，它属于Mysql的Server层面的日志，记录着sql的原始逻辑，主要有两种模式：<strong>一个是statement格式记录的是原始的sql，而row格式则是记录行内容</strong>。</p>\n<p>redo log和binlog记录的形式、内容不同，这两者日志都能通过自己记录的内容恢复数据。</p>\n<p>之所以这两个日志同时存在，是因为刚开始Mysql自带的引擎MyISAM就没有crash-safe功能的，并且在此之前Mysql还没有InnoDB引擎，Mysql自带的binlog日志只是用来归档日志的，所以InnoDB引擎也就通过自己redo log日志来实现crash-safe功能。</p>\n<p>redolog 是重做日志，提供前滚操作，</p>\n<p>undolog是回滚日志，提供回滚操作。</p>\n<p>binlog   是归档日志</p>\n","text":"redo log日志也叫做WAL技术（Write- Ahead Logging），他是一种先写日志，并更新内存，最后再更新磁盘的技术，为了就是减少sql执行期间的数据库io操作，并且更新磁盘往往是在Mysql比较闲的时候，这样就大大减轻了Mysql的压力。 redo log是固定...","link":"","photos":[],"count_time":{"symbolsCount":824,"symbolsTime":"1 mins."},"categories":[{"name":"SQL","slug":"SQL","count":15,"path":"api/categories/SQL.json"}],"tags":[{"name":"MySQL","slug":"MySQL","count":16,"path":"api/tags/MySQL.json"}],"toc":"","author":{"name":"Michael","slug":"michael","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Just Do IT","socials":{"github":"https://github.com/mikeah2011","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/7318914058","zhihu":"https://www.zhihu.com/people/tridiamond","csdn":"https://blog.csdn.net/TriDiamond6","juejin":"https://juejin.cn/user/1873223546578589","customs":{"bilibili":{"icon":"http://localhost:4000/svg/bilibili.svg","link":"https://live.bilibili.com/22619211"},"baidu":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"},"book":{"icon":"far fa-address-book","link":"https://live.bilibili.com/22619211"},"facebook":{"icon":"/svg/facebook.svg","link":"https://facebook.com"}}}},"mapped":true,"prev_post":{"title":"导入&导出优选CSV格式的理由","uid":"d84a5be77f321e677b0e0b0840c629ed","slug":"Other/csv","date":"2018-04-08T02:27:28.000Z","updated":"2022-10-06T07:14:56.620Z","comments":true,"path":"api/articles/Other/csv.json","keywords":null,"cover":null,"text":"CSV，comma-separated values 逗号分隔值，通常被用于在使用纯文本的系统之间，交换表格类型的数据。 CSV是一种基于行的文件格式。也就是说，此类文件中的每一行都对应到数据表中的具体某一行。通常，CSV文件里包含有一个标题行，该标题行提供了数据的列名。如果没有...","link":"","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"csv","slug":"csv","count":1,"path":"api/tags/csv.json"},{"name":"import","slug":"import","count":1,"path":"api/tags/import.json"},{"name":"export","slug":"export","count":1,"path":"api/tags/export.json"}],"author":{"name":"Michael","slug":"michael","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Just Do IT","socials":{"github":"https://github.com/mikeah2011","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/7318914058","zhihu":"https://www.zhihu.com/people/tridiamond","csdn":"https://blog.csdn.net/TriDiamond6","juejin":"https://juejin.cn/user/1873223546578589","customs":{"bilibili":{"icon":"http://localhost:4000/svg/bilibili.svg","link":"https://live.bilibili.com/22619211"},"baidu":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"},"book":{"icon":"far fa-address-book","link":"https://live.bilibili.com/22619211"},"facebook":{"icon":"/svg/facebook.svg","link":"https://facebook.com"}}}}},"next_post":{"title":"网络编程","uid":"b85a5ed5aa29024c7191b1325f9b4bb8","slug":"03_HTTP/网络编程","date":"2018-03-20T07:05:07.000Z","updated":"2022-10-05T13:38:02.014Z","comments":true,"path":"api/articles/03_HTTP/网络编程.json","keywords":null,"cover":[],"text":"1.说下计算机网络体系结构计算机网络体系结构，一般有三种：OSI 七层模型、TCP&#x2F;IP 四层模型、五层结构。 三种网络体系结构 简单说，OSI是一个理论上的网络通信模型，TCP&#x2F;IP是实际上的网络通信模型，五层结构就是为了介绍网络原理而折中的网络通信模型。 ...","link":"","photos":[],"count_time":{"symbolsCount":"34k","symbolsTime":"31 mins."},"categories":[{"name":"网络编程","slug":"网络编程","count":9,"path":"api/categories/网络编程.json"}],"tags":[{"name":"HTTP","slug":"HTTP","count":5,"path":"api/tags/HTTP.json"}],"author":{"name":"Michael","slug":"michael","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Just Do IT","socials":{"github":"https://github.com/mikeah2011","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/7318914058","zhihu":"https://www.zhihu.com/people/tridiamond","csdn":"https://blog.csdn.net/TriDiamond6","juejin":"https://juejin.cn/user/1873223546578589","customs":{"bilibili":{"icon":"http://localhost:4000/svg/bilibili.svg","link":"https://live.bilibili.com/22619211"},"baidu":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"},"book":{"icon":"far fa-address-book","link":"https://live.bilibili.com/22619211"},"facebook":{"icon":"/svg/facebook.svg","link":"https://facebook.com"}}}}}}