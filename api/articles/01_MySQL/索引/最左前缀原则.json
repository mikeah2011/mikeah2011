{"title":"索引的最左前缀原则","uid":"8293f563eb43963f4391de385bc44bf4","slug":"01_MySQL/索引/最左前缀原则","date":"2021-03-20T07:05:07.000Z","updated":"2022-10-05T13:38:01.994Z","comments":true,"path":"api/articles/01_MySQL/索引/最左前缀原则.json","keywords":null,"cover":[],"content":"<p>最左前缀原则就是最左优先，</p>\n<p>在创建多列索引时，要根据业务需求，</p>\n<p>where子句中使用最频繁的一列放在最左边。</p>\n<p>mysql会一直向右匹配直到遇到范围查询(&gt;、&lt;、between、like)就停止匹配，</p>\n<p>比如a &#x3D; 1 and b &#x3D; 2 and c &gt; 3 and d &#x3D; 4 </p>\n<p>如果建立(a,b,c,d)顺序的索引，d是用不到索引的，</p>\n<p>如果建立(a,b,d,c)的索引则都可以用到，</p>\n<p>a,b,d的顺序可以任意调整。</p>\n<p>&#x3D;和in可以乱序，</p>\n<p>比如a &#x3D; 1 and b &#x3D; 2 and c &#x3D; 3 建立(a,b,c)索引可以任意顺序，</p>\n<p>mysql的查询优化器会帮你优化成索引可以识别的形式。</p>\n<p><strong>最左前缀原则可以是联合索引的的最左N个字段，也可以是字符串索引的最左的M个字符</strong>。举个例子，假如现在有一个表的原始数据如下所示：</p>\n<p><img src=\"/mikeah2011/Users/michael/Project/MichaelBlog/images/%E6%9C%80%E5%B7%A6%E5%89%8D%E7%BC%80%E5%8E%9F%E5%88%99.png\" alt=\"图片\"></p>\n<p>并根据<code>col3 ，col2</code>的顺序建立<strong>联合索引</strong>，此时联合索引树结构如图下所示：</p>\n<p><img src=\"/mikeah2011/Users/michael/Project/MichaelBlog/images/%E6%9C%80%E5%B7%A6%E5%89%8D%E7%BC%80%E5%8E%9F%E5%88%99_1.png\" alt=\"图片\"></p>\n<p>叶子结点中首先会根据col3的字符进行排序，若是col3相等，在col3相等的值里面再对col2进行排序，假如我们要查询<code>where col3 like &#39;Eri%&#39;</code>，就可以快速的定位查询到Eric。</p>\n<p>若是查询条件为where col3 like ‘%se’，前面的字符不确定，表示任意字符都可以，这样就可以导致全表扫描进行字符的比较，就会使索引失效。</p>\n","text":"最左前缀原则就是最左优先， 在创建多列索引时，要根据业务需求， where子句中使用最频繁的一列放在最左边。 mysql会一直向右匹配直到遇到范围查询(&gt;、&lt;、between、like)就停止匹配， 比如a &#x3D; 1 and b &#x3D; 2 and c ...","link":"","photos":[],"count_time":{"symbolsCount":626,"symbolsTime":"1 mins."},"categories":[{"name":"索引","slug":"索引","count":14,"path":"api/categories/索引.json"}],"tags":[{"name":"索引","slug":"索引","count":15,"path":"api/tags/索引.json"}],"toc":"","author":{"name":"Michael","slug":"michael","avatar":"https://cdn.jsdelivr.net/gh/mikeah2011/oss@main/uPic/blog_logo.jpeg","link":"/","description":"知我所能者，我所能者，尽善尽美；<br/> 知我所不能者，我所不能者，虚怀若谷。","socials":{"github":"https://github.com/mikeah2011","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/","zhihu":"https://www.zhihu.com/people/","csdn":"https://blog.csdn.net/","juejin":"https://juejin.cn/user/","customs":{"bilibili":{"icon":"http://localhost:4000/svg/bilibili.svg","link":"https://live.bilibili.com/"},"baidu":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/"},"book":{"icon":"far fa-address-book","link":"https://live.bilibili.com/"},"facebook":{"icon":"iconfont icon-facebook","link":"https://facebook.com"}}}},"mapped":true,"prev_post":{"title":"书单","uid":"69d68218b5a6b67545a995ee806b6fa9","slug":"Other/书单","date":"2021-03-20T07:05:07.000Z","updated":"2022-10-05T13:38:02.024Z","comments":true,"path":"api/articles/Other/书单.json","keywords":null,"cover":null,"text":"软技能 代码之外的生存指南 约翰 Z.森梅兹 著 代码整洁之道 马丁 著 代码整洁之道 程序员的职业素养 罗伯特·C.马丁 著 编程珠玑（第2版 修订版） 乔恩·本特利（Jon Bentley） 著 编程珠玑（续 修订版） 乔恩·本特利 著 重构 改善既有代码的设计 马丁·福勒（...","link":"","photos":[],"count_time":{"symbolsCount":422,"symbolsTime":"1 mins."},"categories":[{"name":"编程","slug":"编程","count":1,"path":"api/categories/编程.json"}],"tags":[{"name":"书单","slug":"书单","count":1,"path":"api/tags/书单.json"}],"author":{"name":"Michael","slug":"michael","avatar":"https://cdn.jsdelivr.net/gh/mikeah2011/oss@main/uPic/blog_logo.jpeg","link":"/","description":"知我所能者，我所能者，尽善尽美；<br/> 知我所不能者，我所不能者，虚怀若谷。","socials":{"github":"https://github.com/mikeah2011","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/","zhihu":"https://www.zhihu.com/people/","csdn":"https://blog.csdn.net/","juejin":"https://juejin.cn/user/","customs":{"bilibili":{"icon":"http://localhost:4000/svg/bilibili.svg","link":"https://live.bilibili.com/"},"baidu":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/"},"book":{"icon":"far fa-address-book","link":"https://live.bilibili.com/"},"facebook":{"icon":"iconfont icon-facebook","link":"https://facebook.com"}}}}},"next_post":{"title":"Hyperf 基础","uid":"dbb49c91b895258e0502c7a585bfdf69","slug":"05_PHP/PHP框架/Hyperf","date":"2021-03-20T07:05:07.000Z","updated":"2022-10-05T13:38:02.016Z","comments":true,"path":"api/articles/05_PHP/PHP框架/Hyperf.json","keywords":null,"cover":null,"text":"Hyperf","link":"","photos":[],"count_time":{"symbolsCount":6,"symbolsTime":"1 mins."},"categories":[{"name":"PHP","slug":"PHP","count":24,"path":"api/categories/PHP.json"}],"tags":[{"name":"Hyperf","slug":"Hyperf","count":1,"path":"api/tags/Hyperf.json"}],"author":{"name":"Michael","slug":"michael","avatar":"https://cdn.jsdelivr.net/gh/mikeah2011/oss@main/uPic/blog_logo.jpeg","link":"/","description":"知我所能者，我所能者，尽善尽美；<br/> 知我所不能者，我所不能者，虚怀若谷。","socials":{"github":"https://github.com/mikeah2011","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/","zhihu":"https://www.zhihu.com/people/","csdn":"https://blog.csdn.net/","juejin":"https://juejin.cn/user/","customs":{"bilibili":{"icon":"http://localhost:4000/svg/bilibili.svg","link":"https://live.bilibili.com/"},"baidu":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/"},"book":{"icon":"far fa-address-book","link":"https://live.bilibili.com/"},"facebook":{"icon":"iconfont icon-facebook","link":"https://facebook.com"}}}}}}